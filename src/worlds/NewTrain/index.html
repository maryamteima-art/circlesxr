<html>
<head>
  <!-- Circles' head scripts [REQUIRED] -->
  <circles-start-scripts/>
  <!-- Addons -->
  <!--Environment Addon-->
  <script src="https://unpkg.com/aframe-environment-component@1.3.3/dist/aframe-environment-component.min.js"></script>
  <!--Virtual Joystick Addon-->
  <script src="https://cdn.rawgit.com/mrturck/aframe-joystick/master/joystick.min.js"></script>
  <!--Gesture Controls Addon (for tapping on mobile)-->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/hammer.js/2.0.8/hammer.min.js"></script>
  <!--EXTRAS addon for manipulating gltf alphas to indicate selection-->
  <script src="https://unpkg.com/aframe-extras/dist/aframe-extras.min.js"></script>

  <!-- my scripts -->
  <script type="module" src="/worlds/NewTrain/scripts/game.js"></script>
  
</head>
<body>
  <!-- this is used to create our enter UI that creates a 2D overlay to capture a user gesture for sound/mic access etc. -->
  <circles-start-ui/>

  <!-- a-scene with 'circles-properties' component [REQUIRED] -->
  <a-scene circles_scene_properties circles-platform-scene-shadows="updateInterval:10;">
    <a-assets>
      <img id='skyMap' src='/global/assets/textures/equirectangular/PurpleBlue.jpg' crossorigin="anonymous">
      
      <!-- Circles' built-in assets [REQUIRED] -->

      <!--INDEX CARDS-->
      <audio id="Milk" src="cards/Milk.mp3"></audio>
      <audio id="AirTransport" src="cards/AirTransport.mp3"></audio>
      <audio id="QuartzClock" src="cards/QuartzClock.mp3" ></audio>
      <audio id="Rayon" src="cards/Rayon.mp3"></audio>
      <audio id="TheMallard" src="cards/TheMallard.mp3"></audio>
      <audio id="EspressoMachine" src="cards/EspressoMachine.mp3"></audio>
      <audio id="SewingMachine" src="cards/SewingMachine.mp3"></audio>
      <audio id="Luggage" src="cards/Luggage.mp3"></audio>

      <!--TRAIN ROOM-->
      <a-asset-item id="train" src="compressed/Train.glb"></a-asset-item>

      <!--OTHER INTERACTIVE MODELS-->
      <a-asset-item id="suitcaseOpen" src="compressed/OpenSuitcase.glb"></a-asset-item>
      <a-asset-item id="winNecklace" src="compressed/WinNecklace.glb"></a-asset-item>
      <a-asset-item id="loseNecklace" src="compressed/LoseNecklace.glb"></a-asset-item>
      <a-asset-item id="clockOpen" src="compressed/ClockOpen.glb"></a-asset-item>


      <!--BG-->
      <a-entity circles-sound="type:music; src:audios/Bg.mp3; autoplay:true; loop:true; volume:1;"></a-entity>
      <circles-assets/>
    </a-assets>

    <!-- Circles' built-in manager and avatar [REQUIRED] -->
    <circles-manager-avatar/>

    
    <a-entity light="type:ambient; color:rgb(190,140,210)"></a-entity>
    <a-entity light="type:directional; color:#FFF; intensity:0.6" circles-platform-shadows position="-0.5 1 1"></a-entity>
    
    <!--GAME MANAGER-->
    <a-entity game-manager></a-entity>

    <!--NAV MESH-->
    <a-entity id="navmesh1" geometry="primitive: plane" visible='false' rotation="-90 -90 0" scale= "  127.33 10.14 0 "position = "0 0  -46.714" nav-mesh></a-entity>

    <!-- TRAIN GLTF/GLB SETTING -->
    <a-entity gltf-model="#train"></a-entity>

    <!--OBSERVATIONAL/STATIC PIECES-->

    <!--MILK BOTTLES-->
    <a-entity id = "milk" gltf-model="compressed/MilkBottles.glb" position="-1.3 0.945 -49.209" scale="0.6 0.6 0.6" rotation ="0 90 0"></a-entity>

    <!--POSTERS-->
    <a-entity id = "greenPoster" gltf-model="compressed/GreenPoster.glb" position="-5.381 2.597 6.141" rotation="0 90 0"></a-entity>
    
    <a-entity id = "yellowPoster" gltf-model="compressed/YellowPoster.glb" position="5.5 2.597 7.426" rotation="0 -90 0"></a-entity>
    
    <a-entity id = "bluePoster" gltf-model="compressed/BluePoster.glb" position="5.5 2.597 -6.949" rotation="0 -90 0"></a-entity>

    <a-entity id = "redPoster" gltf-model="compressed/RedPoster.glb" position="-5.355 2.597 -7.078" rotation="0 90 0"></a-entity>

    <a-entity id = "mainPoster" gltf-model="compressed/AirplanePoster.glb" position="5.5 2.597 11.889" rotation="0 -90 0"></a-entity>

    <!-- NEW SEWING MACHINE-->
    <a-entity id = "sewingmachine" gltf-model="compressed/sewingMachine.glb" position = "-3.46 0.319 -69.81"></a-entity>

    <!-- CUTSCENES-->
    <a-image id="cutsceneImage" src="images/scene1.png" position = "0 1.596 17.042" width="4" height="6" visible="true" rotation = "0 -180 0"></a-image>
    <!-- Text entity to display 'Story' above the cutscene -->
    <a-text value="Story" color="#FFF" width="6" position="0.4 5 17.042" rotation="0 -180 0"></a-text>


    <!--LIGHTS--->
    
    <!--Seating Room Sides-->
    <a-entity light="type: point; intensity: 2.31; distance: 40; decay: 0.4; color: #fdbd4e" position = "3.8 6 7.426" ></a-entity>
    <a-entity light="type: point; intensity: 2.31; distance: 40; decay: 0.9; color: #fdbd4e" position = "-4.19 6 7.426"></a-entity>
    
    <!--Seating Room Chandelier-->
    
    <a-entity light="type: point; intensity: 2.00; distance: 45; decay: 0.9; color: #e53469" position = "0.211 6 -5.977"></a-entity>

    <!--Cafe Room -->
    <a-entity light="type: point; intensity: 2.31; distance: 45; decay: 0.4; color: #e6b35c" position = "1.036 5.094 -44.10"></a-entity>

    <!--Baggage Room -->
    <a-entity light="type: point; intensity: 2.31; distance: 40; decay: 0.4; color: #fdbd4e" position = "3.8 6 -60"></a-entity>

    <a-entity light="type: point; intensity: 2.31; distance: 40; decay: 0.4; color: #fdbd4e" position = "0.032 5.549 -90"></a-entity>

  </a-scene>

  <!-- Circles' end scripts [REQUIRED] -->
  <circles-end-scripts/>
 </body>
</html>